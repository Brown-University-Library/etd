{% extends "etd_app/base.html" %}
{% block intro_main %}
<h1>{{candidate.person.first_name}} {{candidate.person.last_name}}</h1>
	
{% endblock %}

{% block content_main %}
<div id="dissertation_info" class="well">
  <h4>Dissertation Information</h4>
  <dl class="dl-horizontal">
    <dt>Title: </dt><dd>{{ candidate.thesis.title|default:'&nbsp;' }}</dd>
    <dt>Abstract: </dt><dd>{{ candidate.thesis.abstract|default:'&nbsp;' }}</dd>
    <dt>Topics: </dt>
      {% if candidate.thesis.keywords.all %}
        {% for keyword in candidate.thesis.keywords.all %}
          <dd>{{ keyword }}</dd>
        {% endfor %}
      {% else %}
        <dd>&nbsp;</dd>
      {% endif %}
    <dt>Language:</dt> <dd>{{ candidate.thesis.language.name }}</dd>
  </dl>
  {% if not candidate.thesis.is_locked %}
    <a class="btn btn-primary" href="{% url 'candidate_metadata' %}">Edit</a>
  {% endif %}
</div>

<div id="dissertation_file" class="well">
    <h4>Dissertation File</h4>
    {% if candidate.thesis.original_file_name %}
        <p>{{ candidate.thesis.original_file_name }}
        {% if not candidate.thesis.is_locked %}
          <a class="btn btn-primary" href="{% url 'candidate_upload' %}">Replace File</a></p>
        {% endif %}
    {% else %}
        <p><a class="btn btn-primary" href="{% url 'candidate_upload' %}">Upload File</a></p>
    {% endif %}
</div>

<div id="dissertation_committee" class="well">
<h4>Committee Members</h4>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <tr>
          <th>First</th>
          <th>Last</th>
          <th>Role</th>
          <th>Department/Affiliation</th>
          <th></th>
        </tr>
        {% for cmember in candidate.committee_members.all %}
        <tr>
          <td>{{cmember.person.first_name}}</td>
          <td>{{cmember.person.last_name}}</td>
          <td>{{cmember.get_role_display}}</td>
          <td>{% if cmember.department %}{{cmember.department.name}}{% else %}{{cmember.affiliation}}{% endif %}</td>
          <td>
            {% if not candidate.thesis.is_locked %}
            <form action="{% url 'candidate_committee_remove' cmember.id %}" method="POST">{% csrf_token %}
              <input class="btn" type="submit" value="Remove" />
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}

        <tr>
          <td colspan=5>
            {% if not candidate.thesis.is_locked %}
            <a class="btn btn-primary" href="{% url 'candidate_committee' %}">
              <i class="fa fa-plus" aria-hidden="true"></i> Add Committee Member
            </a>
            {% endif %}
          </td>
        </tr>
      </table>
    </div>
</div>
{% endblock %}

{% block content_sidebar %}
<div class="well">
  <ul class="nav nav-pills nav-stacked">
    <li role="presentation"><a href="{% url 'candidate_home' %}">Candidate Home</a></li>
    <li role="presentation"><a href="{% url 'register' %}">Edit Profile</a></li>
  </ul>
</div>

<div class="well">
  <dl>
    <dt>Dissertation Status:</dt><dd>{{ candidate.thesis.get_status_display }}</dd>
  </dl>
  {% if candidate.thesis.ready_to_submit %}
    <p><a class="btn btn-primary" href="{% url 'candidate_preview_submission' %}">Preview and Submit Dissertation</a></p>
  {% endif %}
</div>
	
    <h4>Paper Submission Checklist:</h4>
    <p>(Grad School checks off when received)</p>
    <ul class="list-group">
        <li class="list-group-item">
          {% if candidate.gradschool_checklist.dissertation_fee %}
            <i class="fa fa-lg fa-check text-success"></i>
          {% endif %}
          Submit Cashier's Office receipt for dissertation fee ($50)
          {% if candidate.gradschool_checklist.dissertation_fee %}
            (Completed on {{candidate.gradschool_checklist.dissertation_fee}})
          {% endif %}
        </li>
        <li class="list-group-item">
          {% if candidate.gradschool_checklist.bursar_receipt %}
            <i class="fa fa-lg fa-check text-success"></i>
          {% endif %}
          Submit Bursar's Office receipt (white) showing that all outstanding debts have been paid
          {% if candidate.gradschool_checklist.bursar_receipt %}
            (Completed on {{candidate.gradschool_checklist.bursar_receipt}})
          {% endif %}
        </li>
        <li class="list-group-item">
          {% if candidate.gradschool_checklist.gradschool_exit_survey %}
            <i class="fa fa-lg fa-check text-success"></i>
          {% endif %}
          Complete Graduate School Exit Survey
          {% if candidate.gradschool_checklist.gradschool_exit_survey %}
            (Completed on {{candidate.gradschool_checklist.gradschool_exit_survey}})
          {% endif %}
        </li>
        <li class="list-group-item">
          {% if candidate.gradschool_checklist.earned_docs_survey %}
            <i class="fa fa-lg fa-check text-success"></i>
          {% endif %}
          Submit Survey of Earned Doctorates
          {% if candidate.gradschool_checklist.earned_docs_survey %}
            (Completed on {{candidate.gradschool_checklist.earned_docs_survey}})
          {% endif %}
        </li>
        <li class="list-group-item">
          {% if candidate.gradschool_checklist.pages_submitted_to_gradschool %}
            <i class="fa fa-lg fa-check text-success"></i>
          {% endif %}
          Submit title page, abstract, and signature pages to Graduate School
          {% if candidate.gradschool_checklist.pages_submitted_to_gradschool %}
            (Completed on {{candidate.gradschool_checklist.pages_submitted_to_gradschool}})
          {% endif %}
        </li>
    </ul>
{% endblock %}
